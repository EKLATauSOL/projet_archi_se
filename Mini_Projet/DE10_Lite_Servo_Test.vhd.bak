library ieee;
use ieee.std_logic_1164.all;

entity DE10_Lite_Servo_Test is
    port (
        CLOCK_50 : in  std_logic;                     -- Nom exact dans le QSF
        KEY      : in  std_logic_vector(1 downto 0); -- KEY(0) pour reset
        SW       : in  std_logic_vector(9 downto 0); -- Les 10 switches
        LEDR     : out std_logic_vector(9 downto 0); -- Les 10 LEDs pour feedback
        GPIO     : out std_logic_vector(35 downto 0) -- Vecteur GPIO complet pour éviter les erreurs
    );
end entity;

architecture rtl of DE10_Lite_Servo_Test is
begin
    -- Feedback visuel : les LEDs recopient les switches
    -- Si ça ne s'allume pas, le FPGA n'est pas bien programmé
    LEDR <= SW;

    -- Instanciation du contrôleur de servomoteur
    i_servo : entity work.servomoteur
        port map (
            clk      => CLOCK_50,
            reset_n  => KEY(0),          -- Bouton KEY0 (attention: '1' au repos)
            position => SW(7 downto 0),  -- Utilise les 8 premiers switches
            commande => GPIO(0)          -- Signal vers PIN_V10
        );
end architecture;
